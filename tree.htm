<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>portfolio</title>
  <link rel="stylesheet" type="text/css" href="animation.css">
  <style type="text/css">
    body{
      margin:30px auto;
    }
    p{
      font-family:sans-serif;
    }

    #tree-wrapper{
      width: 290px;
      height: 400px;
      border:1px solid red;
    }
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>
<body>

  <div id="tree-wrapper">
    <!-- javascript will grow a tree of leaves here :) -->
  </div>
  <script type="text/javascript">

    var current_level = 1; // which is the current leaf?
    var furthest_page_viewed = 2; // Where should the leaf link too?

    // THIS DATA gets passed in from the backend
    var leaves = {"levels": [{"position": 1, "percent_done": "0.0%", "link": "program/page/1/", "type": "seen"}, {"position": 2, "percent_done": "0%", "link": "#", "type": "unseen"}, {"position": 3, "percent_done": "0%", "link": "#", "type": "unseen"}, {"position": 4, "percent_done": "0%", "link": "#", "type": "unseen"}]};
    function random_int(min, max){
        return Math.floor(Math.random() * (max - min)) + min;
    }
    $(function(){
        // relative CSS positions
        var bottom = 24;
        var left = 37;
        var deg = -30;
        $('#tree-wrapper').html("<img src='tree-blank.svg'>");
        $.each(leaves.levels,function(index){
            leaf = leaves.levels[index];
            if(leaf.type == "seen"){
                $('#tree-wrapper').append("<a href='"+leaf.link+"'><img src='leaf-seen.svg' style='position:relative;left:"+left+"%;bottom:"+bottom+"%;transform:rotate("+deg+"deg);-webkit-transform:rotate("+deg+"deg);width:20%;'></a>");    
            } else { // unseen stuff
                $('#tree-wrapper').append("<a href='"+leaf.link+"'><img src='leaf-unseen.svg' style='position:relative;left:"+left+"%;bottom:"+bottom+"%;transform:rotate("+deg+"deg);-webkit-transform:rotate("+deg+"deg);width:20%;'></a>");
            }
            // TODO: Use an array of positions... ?
            left = random_int(0,100);
            bottom = random_int(0,100);
            deg = random_int(-45,45);
        });
    });

  </script>
</body>
</html>
